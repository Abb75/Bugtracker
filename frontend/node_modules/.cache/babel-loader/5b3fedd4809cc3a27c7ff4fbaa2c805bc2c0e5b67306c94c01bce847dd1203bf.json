{"ast":null,"code":"import _slicedToArray from\"C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{GetCurrentUser,GetTokenUser}from\"../../redux/selectors/userSelectors\";import{useDispatch}from\"react-redux\";import{BugProject}from\"../../redux/selectors/bugSelectors\";import{useState,useEffect}from\"react\";import{useParams}from\"react-router-dom\";import{selectedBug}from\"../../redux/actions/bugActions\";import{GetBugHistoryApi}from\"../../redux/actions/bugActions\";import{Container,Card,CardContent,Typography,Grid,Box}from\"@mui/material\";import{BugHistoryData}from\"../../redux/selectors/bugSelectors\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var BugHistory=function BugHistory(){var _formatDataBug$;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),formatDataBug=_useState2[0],setFormatDataBug=_useState2[1];var tokenUser=GetTokenUser();var history=BugHistoryData();var currentUser=GetCurrentUser();var dispatch=useDispatch();var _useParams=useParams(),projectId=_useParams.projectId,bugId=_useParams.bugId;var bugProject=BugProject();var searchSelectedBug=bugProject===null||bugProject===void 0?void 0:bugProject.filter(function(bug){return bug.id===parseInt(bugId);});var formatDataBugHistory=function formatDataBugHistory(){var historyBug=history===null||history===void 0?void 0:history.data;var formatDataBug=historyBug===null||historyBug===void 0?void 0:historyBug.map(function(data){var _data$,_data$$replaceAll;return JSON.parse((_data$=data[0])===null||_data$===void 0?void 0:(_data$$replaceAll=_data$.replaceAll(\"\\\"\",\"&quot;\"))===null||_data$$replaceAll===void 0?void 0:_data$$replaceAll.replaceAll(\"'\",\"\\\"\"));}).filter(Boolean);setFormatDataBug([formatDataBug]);};useEffect(function(){try{dispatch(selectedBug(searchSelectedBug));dispatch(GetBugHistoryApi(projectId,bugId,tokenUser));}catch(error){console.error(error);}},[projectId,bugId]);useEffect(function(){formatDataBugHistory();},[history]);return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"space-between\",marginTop:\"5px\",marginBottom:\"10px\",marginLeft:\"130px\",paddingRight:\"50px\",width:\"100%\",children:/*#__PURE__*/_jsx(Card,{elevation:2,style:{maxHeight:'550px',overflowY:'auto'},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{style:{marginBottom:'40px'},variant:\"h5\",gutterBottom:true,children:/*#__PURE__*/_jsx(\"strong\",{children:\"History(s) :\"})}),(_formatDataBug$=formatDataBug[0])===null||_formatDataBug$===void 0?void 0:_formatDataBug$.map(function(history){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,alignItems:\"center\",children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Typography,{style:{fontSize:'1rem',color:'black'},variant:\"subtitle1\",children:/*#__PURE__*/_jsxs(\"strong\",{children:[history.date,\" \"]})})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",children:[\"Status changed on \",history.date,\" to \",history.status]})})]}),/*#__PURE__*/_jsx(\"hr\",{style:{marginTop:'20px',marginBottom:'10px',borderColor:'#ddd'}})]},history.id);})]})})})});};","map":{"version":3,"names":["GetCurrentUser","GetTokenUser","useDispatch","BugProject","useState","useEffect","useParams","selectedBug","GetBugHistoryApi","Container","Card","CardContent","Typography","Grid","Box","BugHistoryData","BugHistory","formatDataBug","setFormatDataBug","tokenUser","history","currentUser","dispatch","projectId","bugId","bugProject","searchSelectedBug","filter","bug","id","parseInt","formatDataBugHistory","historyBug","data","map","JSON","parse","replaceAll","Boolean","error","console","maxHeight","overflowY","marginBottom","fontSize","color","date","status","marginTop","borderColor"],"sources":["C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/src/pages/BugDetails/BugHistory.js"],"sourcesContent":["import { GetCurrentUser, GetTokenUser } from \"../../redux/selectors/userSelectors\"\r\nimport { useDispatch } from \"react-redux\"\r\nimport { BugProject } from \"../../redux/selectors/bugSelectors\"\r\nimport { useState, useEffect } from \"react\"\r\nimport { useParams } from \"react-router-dom\"\r\nimport { selectedBug } from \"../../redux/actions/bugActions\"\r\nimport { GetBugHistoryApi } from \"../../redux/actions/bugActions\"\r\nimport { Container, Card, CardContent, Typography, Grid, Box } from \"@mui/material\"\r\nimport { BugHistoryData } from \"../../redux/selectors/bugSelectors\"\r\n\r\n export const BugHistory = () => {\r\n\r\n    const [formatDataBug, setFormatDataBug] = useState([])\r\n    const tokenUser = GetTokenUser()  \r\n\r\n    const history = BugHistoryData()\r\n    const currentUser = GetCurrentUser()\r\n    const dispatch = useDispatch() \r\n    const {projectId, bugId} = useParams()\r\n    const bugProject = BugProject()\r\n    const searchSelectedBug = bugProject?.filter(bug => bug.id === parseInt(bugId))\r\n    const formatDataBugHistory = () => {\r\n    const historyBug = history?.data;\r\n    const formatDataBug = historyBug\r\n      ?.map(data => JSON.parse(data[0]?.replaceAll(\"\\\"\", \"&quot;\")?.replaceAll(\"'\", \"\\\"\")))\r\n      .filter(Boolean); \r\n  \r\n    setFormatDataBug([formatDataBug]);\r\n  }\r\n  useEffect(() => {\r\n    try{\r\n       dispatch(selectedBug(searchSelectedBug));\r\n       dispatch(GetBugHistoryApi(projectId, bugId, tokenUser));\r\n    }\r\n    catch(error){\r\n      console.error(error)\r\n    }\r\n   \r\n  }, [projectId, bugId]);\r\n  \r\n  useEffect(() => {\r\n    formatDataBugHistory();\r\n  }, [history])\r\n  \r\n\r\nreturn (\r\n    <Container>\r\n          <Box display=\"flex\" justifyContent=\"space-between\" marginTop=\"5px\" marginBottom=\"10px\"  marginLeft='130px' paddingRight='50px' width={\"100%\"} >\r\n\r\n    <Card elevation={2} style={{ maxHeight: '550px',overflowY: 'auto' }}>\r\n                <CardContent>\r\n                <Typography style={{marginBottom: '40px'}} variant=\"h5\" gutterBottom>\r\n              <strong>History(s) :</strong> \r\n            \r\n            </Typography>\r\n                  {formatDataBug[0]?.map((history) => (\r\n                    <div key={history.id}>\r\n                      <Grid container spacing={2} alignItems=\"center\">\r\n                       \r\n                        <Grid item>\r\n                          <Typography  style= {{ fontSize: '1rem',color: 'black'}} variant=\"subtitle1\">\r\n                            <strong>{history.date} </strong>\r\n                          </Typography>\r\n                        </Grid>\r\n                        <Grid item>\r\n                          <Typography variant=\"subtitle1\">\r\n                             Status changed on {history.date} to {history.status}\r\n                          </Typography>\r\n                        </Grid>\r\n                      </Grid>\r\n                      <hr style={{ marginTop: '20px', marginBottom: '10px', borderColor: '#ddd' }} />\r\n\r\n                    </div>\r\n                  ))}\r\n                </CardContent>\r\n              </Card>\r\n              </Box>\r\n    </Container>\r\n  );\r\n}\r\n"],"mappings":"8IAAA,OAASA,cAAc,CAAEC,YAAY,KAAQ,qCAAqC,CAClF,OAASC,WAAW,KAAQ,aAAa,CACzC,OAASC,UAAU,KAAQ,oCAAoC,CAC/D,OAASC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,SAAS,KAAQ,kBAAkB,CAC5C,OAASC,WAAW,KAAQ,gCAAgC,CAC5D,OAASC,gBAAgB,KAAQ,gCAAgC,CACjE,OAASC,SAAS,CAAEC,IAAI,CAAEC,WAAW,CAAEC,UAAU,CAAEC,IAAI,CAAEC,GAAG,KAAQ,eAAe,CACnF,OAASC,cAAc,KAAQ,oCAAoC,yFAElE,MAAO,IAAMC,WAAU,CAAG,QAAbA,WAAU,EAAS,qBAE7B,cAA0CZ,QAAQ,CAAC,EAAE,CAAC,wCAA/Ca,aAAa,eAAEC,gBAAgB,eACtC,GAAMC,UAAS,CAAGlB,YAAY,EAAE,CAEhC,GAAMmB,QAAO,CAAGL,cAAc,EAAE,CAChC,GAAMM,YAAW,CAAGrB,cAAc,EAAE,CACpC,GAAMsB,SAAQ,CAAGpB,WAAW,EAAE,CAC9B,eAA2BI,SAAS,EAAE,CAA/BiB,SAAS,YAATA,SAAS,CAAEC,KAAK,YAALA,KAAK,CACvB,GAAMC,WAAU,CAAGtB,UAAU,EAAE,CAC/B,GAAMuB,kBAAiB,CAAGD,UAAU,SAAVA,UAAU,iBAAVA,UAAU,CAAEE,MAAM,CAAC,SAAAC,GAAG,QAAIA,IAAG,CAACC,EAAE,GAAKC,QAAQ,CAACN,KAAK,CAAC,GAAC,CAC/E,GAAMO,qBAAoB,CAAG,QAAvBA,qBAAoB,EAAS,CACnC,GAAMC,WAAU,CAAGZ,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEa,IAAI,CAChC,GAAMhB,cAAa,CAAGe,UAAU,SAAVA,UAAU,iBAAVA,UAAU,CAC5BE,GAAG,CAAC,SAAAD,IAAI,qCAAIE,KAAI,CAACC,KAAK,SAACH,IAAI,CAAC,CAAC,CAAC,oDAAP,OAASI,UAAU,CAAC,IAAI,CAAE,QAAQ,CAAC,4CAAnC,kBAAqCA,UAAU,CAAC,GAAG,CAAE,IAAI,CAAC,CAAC,GAAC,CACpFV,MAAM,CAACW,OAAO,CAAC,CAElBpB,gBAAgB,CAAC,CAACD,aAAa,CAAC,CAAC,CACnC,CAAC,CACDZ,SAAS,CAAC,UAAM,CACd,GAAG,CACAiB,QAAQ,CAACf,WAAW,CAACmB,iBAAiB,CAAC,CAAC,CACxCJ,QAAQ,CAACd,gBAAgB,CAACe,SAAS,CAAEC,KAAK,CAAEL,SAAS,CAAC,CAAC,CAC1D,CACA,MAAMoB,KAAK,CAAC,CACVC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC,CACtB,CAEF,CAAC,CAAE,CAAChB,SAAS,CAAEC,KAAK,CAAC,CAAC,CAEtBnB,SAAS,CAAC,UAAM,CACd0B,oBAAoB,EAAE,CACxB,CAAC,CAAE,CAACX,OAAO,CAAC,CAAC,CAGf,mBACI,KAAC,SAAS,wBACJ,KAAC,GAAG,EAAC,OAAO,CAAC,MAAM,CAAC,cAAc,CAAC,eAAe,CAAC,SAAS,CAAC,KAAK,CAAC,YAAY,CAAC,MAAM,CAAE,UAAU,CAAC,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC,KAAK,CAAE,MAAO,uBAEnJ,KAAC,IAAI,EAAC,SAAS,CAAE,CAAE,CAAC,KAAK,CAAE,CAAEqB,SAAS,CAAE,OAAO,CAACC,SAAS,CAAE,MAAO,CAAE,uBACxD,MAAC,WAAW,yBACZ,KAAC,UAAU,EAAC,KAAK,CAAE,CAACC,YAAY,CAAE,MAAM,CAAE,CAAC,OAAO,CAAC,IAAI,CAAC,YAAY,4BACtE,wBAAQ,cAAY,EAAS,EAElB,kBACN1B,aAAa,CAAC,CAAC,CAAC,0CAAhB,gBAAkBiB,GAAG,CAAC,SAACd,OAAO,qBAC7B,oCACE,MAAC,IAAI,EAAC,SAAS,MAAC,OAAO,CAAE,CAAE,CAAC,UAAU,CAAC,QAAQ,wBAE7C,KAAC,IAAI,EAAC,IAAI,4BACR,KAAC,UAAU,EAAE,KAAK,CAAG,CAAEwB,QAAQ,CAAE,MAAM,CAACC,KAAK,CAAE,OAAO,CAAE,CAAC,OAAO,CAAC,WAAW,uBAC1E,0BAASzB,OAAO,CAAC0B,IAAI,CAAC,GAAC,GAAS,EACrB,EACR,cACP,KAAC,IAAI,EAAC,IAAI,4BACR,MAAC,UAAU,EAAC,OAAO,CAAC,WAAW,WAAC,oBACX,CAAC1B,OAAO,CAAC0B,IAAI,CAAC,MAAI,CAAC1B,OAAO,CAAC2B,MAAM,GACzC,EACR,GACF,cACP,WAAI,KAAK,CAAE,CAAEC,SAAS,CAAE,MAAM,CAAEL,YAAY,CAAE,MAAM,CAAEM,WAAW,CAAE,MAAO,CAAE,EAAG,GAdvE7B,OAAO,CAACS,EAAE,CAgBd,EACP,CAAC,GACU,EACT,EACD,EACJ,CAEhB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}