{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import TextField from'@mui/material/TextField';import Button from'@mui/material/Button';import Container from'@mui/material/Container';import Typography from'@mui/material/Typography';import Box from'@mui/material/Box';import Grid from'@mui/material/Grid';import Select from'@mui/material/Select';import MenuItem from'@mui/material/MenuItem';import FormControl from'@mui/material/FormControl';import InputLabel from'@mui/material/InputLabel';import{useNavigate,useParams}from'react-router-dom';import{PostInvitationApi}from'../../redux/actions/invitationActions';import{useDispatch}from'react-redux';//import { tokenUser } from '../../hooks/useLocalStorage';\nimport{SendErrorNotification,SendSuccessNotification}from'../Alert';import{GetCurrentUser,GetTokenUser}from'../../redux/selectors/userSelectors';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var InvitationForm=function InvitationForm(){var currentUser=GetCurrentUser();var navigate=useNavigate();var dispatch=useDispatch();var _useParams=useParams(),id=_useParams.id;var initialFormData={name:'',email:'',role:'',project:id,invited_by:currentUser.id};//const tokenUser = localStorage.getItem('access_token')\nvar tokenUser=GetTokenUser();var _useState=useState(initialFormData),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var name=formData.name,email=formData.email,role=formData.role;var handleChange=function handleChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.id,e.target.value)));};var handleSubmit=function handleSubmit(e){e.preventDefault();sendInvitation();};var sendInvitation=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return dispatch(PostInvitationApi(id,formData,tokenUser));case 3:SendSuccessNotification('Invitation send with success');_context.next=9;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);SendErrorNotification('invitation send failed');case 9:case\"end\":return _context.stop();}},_callee,null,[[0,6]]);}));return function sendInvitation(){return _ref.apply(this,arguments);};}();var handleChangeRole=function handleChangeRole(e){setFormData(_objectSpread(_objectSpread({},formData),{},{role:e.target.value}));};return/*#__PURE__*/_jsx(Container,{maxWidth:\"sm\",children:/*#__PURE__*/_jsxs(Box,{sx:{marginTop:4,display:'flex',flexDirection:'column',alignItems:'center'},children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",children:\"Add member\"}),/*#__PURE__*/_jsxs(Box,{component:\"form\",noValidate:true,onSubmit:handleSubmit,sx:{mt:3},children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,id:\"name\",variant:\"outlined\",margin:\"normal\",name:\"recipientEmail\",label:\"Name\",value:name,onChange:handleChange,required:true,sx:{backgroundColor:'background.paper'}}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,id:\"email\",variant:\"outlined\",margin:\"normal\",name:\"recipientEmail\",label:\"Email\",value:email,onChange:handleChange,required:true,sx:{backgroundColor:'background.paper'}}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,variant:\"outlined\",margin:\"normal\",children:[/*#__PURE__*/_jsx(InputLabel,{children:\"R\\xF4le\"}),/*#__PURE__*/_jsxs(Select,{name:\"role\",label:\"R\\xF4le\",value:role,onChange:handleChangeRole,sx:{backgroundColor:'background.paper'},children:[/*#__PURE__*/_jsx(MenuItem,{value:\"admin\",children:\"Admin\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"developer\",children:\"Developer\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"submitter\",children:\"Submitter\"})]})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",color:\"primary\",sx:{mt:3,mb:2},children:\"Send invitation\"})]})]})});};export default InvitationForm;","map":{"version":3,"names":["React","useState","TextField","Button","Container","Typography","Box","Grid","Select","MenuItem","FormControl","InputLabel","useNavigate","useParams","PostInvitationApi","useDispatch","SendErrorNotification","SendSuccessNotification","GetCurrentUser","GetTokenUser","InvitationForm","currentUser","navigate","dispatch","id","initialFormData","name","email","role","project","invited_by","tokenUser","formData","setFormData","handleChange","e","target","value","handleSubmit","preventDefault","sendInvitation","handleChangeRole","marginTop","display","flexDirection","alignItems","mt","backgroundColor","mb"],"sources":["C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/src/components/forms/InvitationForm.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport TextField from '@mui/material/TextField';\r\nimport Button from '@mui/material/Button';\r\nimport Container from '@mui/material/Container';\r\nimport Typography from '@mui/material/Typography';\r\nimport Box from '@mui/material/Box';\r\nimport Grid from '@mui/material/Grid';\r\nimport Select from '@mui/material/Select';\r\nimport MenuItem from '@mui/material/MenuItem';\r\nimport FormControl from '@mui/material/FormControl';\r\nimport InputLabel from '@mui/material/InputLabel';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport { PostInvitationApi } from '../../redux/actions/invitationActions';\r\nimport { useDispatch } from 'react-redux';\r\n//import { tokenUser } from '../../hooks/useLocalStorage';\r\nimport { SendErrorNotification, SendSuccessNotification } from '../Alert';\r\nimport { GetCurrentUser, GetTokenUser } from '../../redux/selectors/userSelectors';\r\n\r\nconst InvitationForm = () => {\r\n  const currentUser = GetCurrentUser()\r\n  const navigate = useNavigate()\r\n  const dispatch = useDispatch()\r\n  const {id} = useParams()\r\n  const initialFormData = {\r\n    name : '',\r\n    email : '',\r\n    role : '',\r\n    project : id,\r\n    invited_by : currentUser.id\r\n    \r\n   \r\n\r\n  }\r\n  //const tokenUser = localStorage.getItem('access_token')\r\n  const tokenUser = GetTokenUser()\r\n  const [formData, setFormData] = useState(initialFormData)\r\n  const {name, email, role } = formData\r\n  const handleChange = (e) => {\r\n \r\n    setFormData({\r\n      ...formData,\r\n      [e.target.id]: e.target.value,\r\n    });\r\n  };\r\n\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    sendInvitation()\r\n    \r\n  };\r\n  \r\n  \r\n  const sendInvitation = async() => {\r\n    try {\r\n      await dispatch(PostInvitationApi(id, formData, tokenUser))\r\n      SendSuccessNotification('Invitation send with success')\r\n    }\r\n    catch(error){\r\n      SendErrorNotification('invitation send failed')\r\n    }\r\n  }\r\n\r\n  const handleChangeRole = (e) => {\r\n    setFormData({\r\n      ...formData,\r\n      role: e.target.value,\r\n    });\r\n  };\r\n\r\n\r\n  \r\n\r\n  return (\r\n    <Container maxWidth=\"sm\">\r\n      <Box sx={{ marginTop: 4, display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n        Add member\r\n        </Typography>\r\n        <Box component=\"form\" noValidate onSubmit={handleSubmit} sx={{ mt: 3 }}>\r\n          <TextField\r\n            fullWidth\r\n            id='name'\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            name=\"recipientEmail\"\r\n            label=\"Name\"\r\n            value={name}\r\n            onChange={handleChange}\r\n            required\r\n            sx={{ backgroundColor: 'background.paper' }}\r\n          />\r\n          <TextField\r\n            fullWidth\r\n            id='email'\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            name=\"recipientEmail\"\r\n            label=\"Email\"\r\n            value={email}\r\n            onChange={handleChange}\r\n            required\r\n            sx={{ backgroundColor: 'background.paper' }}\r\n          />\r\n          <FormControl fullWidth variant=\"outlined\" margin=\"normal\">\r\n            <InputLabel>Rôle</InputLabel>\r\n            <Select\r\n           \r\n              name=\"role\"\r\n              label=\"Rôle\"\r\n              value={role}\r\n              onChange={handleChangeRole} \r\n              sx={{ backgroundColor: 'background.paper' }}\r\n            >\r\n              <MenuItem value=\"admin\">Admin</MenuItem>\r\n              <MenuItem value=\"developer\">Developer</MenuItem>\r\n              <MenuItem value=\"submitter\">Submitter</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            sx={{ mt: 3, mb: 2 }}\r\n          >\r\n           Send invitation\r\n          </Button>\r\n        </Box>\r\n      </Box>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default InvitationForm;\r\n"],"mappings":"utBAAA,MAAOA,MAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAOC,UAAS,KAAM,yBAAyB,CAC/C,MAAOC,OAAM,KAAM,sBAAsB,CACzC,MAAOC,UAAS,KAAM,yBAAyB,CAC/C,MAAOC,WAAU,KAAM,0BAA0B,CACjD,MAAOC,IAAG,KAAM,mBAAmB,CACnC,MAAOC,KAAI,KAAM,oBAAoB,CACrC,MAAOC,OAAM,KAAM,sBAAsB,CACzC,MAAOC,SAAQ,KAAM,wBAAwB,CAC7C,MAAOC,YAAW,KAAM,2BAA2B,CACnD,MAAOC,WAAU,KAAM,0BAA0B,CACjD,OAASC,WAAW,CAAEC,SAAS,KAAQ,kBAAkB,CACzD,OAASC,iBAAiB,KAAQ,uCAAuC,CACzE,OAASC,WAAW,KAAQ,aAAa,CACzC;AACA,OAASC,qBAAqB,CAAEC,uBAAuB,KAAQ,UAAU,CACzE,OAASC,cAAc,CAAEC,YAAY,KAAQ,qCAAqC,CAAC,wFAEnF,GAAMC,eAAc,CAAG,QAAjBA,eAAc,EAAS,CAC3B,GAAMC,YAAW,CAAGH,cAAc,EAAE,CACpC,GAAMI,SAAQ,CAAGV,WAAW,EAAE,CAC9B,GAAMW,SAAQ,CAAGR,WAAW,EAAE,CAC9B,eAAaF,SAAS,EAAE,CAAjBW,EAAE,YAAFA,EAAE,CACT,GAAMC,gBAAe,CAAG,CACtBC,IAAI,CAAG,EAAE,CACTC,KAAK,CAAG,EAAE,CACVC,IAAI,CAAG,EAAE,CACTC,OAAO,CAAGL,EAAE,CACZM,UAAU,CAAGT,WAAW,CAACG,EAI3B,CAAC,CACD;AACA,GAAMO,UAAS,CAAGZ,YAAY,EAAE,CAChC,cAAgClB,QAAQ,CAACwB,eAAe,CAAC,wCAAlDO,QAAQ,eAAEC,WAAW,eAC5B,GAAOP,KAAI,CAAkBM,QAAQ,CAA9BN,IAAI,CAAEC,KAAK,CAAWK,QAAQ,CAAxBL,KAAK,CAAEC,IAAI,CAAKI,QAAQ,CAAjBJ,IAAI,CACxB,GAAMM,aAAY,CAAG,QAAfA,aAAY,CAAIC,CAAC,CAAK,CAE1BF,WAAW,gCACND,QAAQ,wBACVG,CAAC,CAACC,MAAM,CAACZ,EAAE,CAAGW,CAAC,CAACC,MAAM,CAACC,KAAK,GAC7B,CACJ,CAAC,CAGD,GAAMC,aAAY,CAAG,QAAfA,aAAY,CAAIH,CAAC,CAAK,CAC1BA,CAAC,CAACI,cAAc,EAAE,CAClBC,cAAc,EAAE,CAElB,CAAC,CAGD,GAAMA,eAAc,4FAAG,0KAEbjB,SAAQ,CAACT,iBAAiB,CAACU,EAAE,CAAEQ,QAAQ,CAAED,SAAS,CAAC,CAAC,QAC1Dd,uBAAuB,CAAC,8BAA8B,CAAC,+EAGvDD,qBAAqB,CAAC,wBAAwB,CAAC,mEAElD,kBARKwB,eAAc,0CAQnB,CAED,GAAMC,iBAAgB,CAAG,QAAnBA,iBAAgB,CAAIN,CAAC,CAAK,CAC9BF,WAAW,gCACND,QAAQ,MACXJ,IAAI,CAAEO,CAAC,CAACC,MAAM,CAACC,KAAK,GACpB,CACJ,CAAC,CAKD,mBACE,KAAC,SAAS,EAAC,QAAQ,CAAC,IAAI,uBACtB,MAAC,GAAG,EAAC,EAAE,CAAE,CAAEK,SAAS,CAAE,CAAC,CAAEC,OAAO,CAAE,MAAM,CAAEC,aAAa,CAAE,QAAQ,CAAEC,UAAU,CAAE,QAAS,CAAE,wBACxF,KAAC,UAAU,EAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,UAAC,YAExC,EAAa,cACb,MAAC,GAAG,EAAC,SAAS,CAAC,MAAM,CAAC,UAAU,MAAC,QAAQ,CAAEP,YAAa,CAAC,EAAE,CAAE,CAAEQ,EAAE,CAAE,CAAE,CAAE,wBACrE,KAAC,SAAS,EACR,SAAS,MACT,EAAE,CAAC,MAAM,CACT,OAAO,CAAC,UAAU,CAClB,MAAM,CAAC,QAAQ,CACf,IAAI,CAAC,gBAAgB,CACrB,KAAK,CAAC,MAAM,CACZ,KAAK,CAAEpB,IAAK,CACZ,QAAQ,CAAEQ,YAAa,CACvB,QAAQ,MACR,EAAE,CAAE,CAAEa,eAAe,CAAE,kBAAmB,CAAE,EAC5C,cACF,KAAC,SAAS,EACR,SAAS,MACT,EAAE,CAAC,OAAO,CACV,OAAO,CAAC,UAAU,CAClB,MAAM,CAAC,QAAQ,CACf,IAAI,CAAC,gBAAgB,CACrB,KAAK,CAAC,OAAO,CACb,KAAK,CAAEpB,KAAM,CACb,QAAQ,CAAEO,YAAa,CACvB,QAAQ,MACR,EAAE,CAAE,CAAEa,eAAe,CAAE,kBAAmB,CAAE,EAC5C,cACF,MAAC,WAAW,EAAC,SAAS,MAAC,OAAO,CAAC,UAAU,CAAC,MAAM,CAAC,QAAQ,wBACvD,KAAC,UAAU,WAAC,SAAI,EAAa,cAC7B,MAAC,MAAM,EAEL,IAAI,CAAC,MAAM,CACX,KAAK,CAAC,SAAM,CACZ,KAAK,CAAEnB,IAAK,CACZ,QAAQ,CAAEa,gBAAiB,CAC3B,EAAE,CAAE,CAAEM,eAAe,CAAE,kBAAmB,CAAE,wBAE5C,KAAC,QAAQ,EAAC,KAAK,CAAC,OAAO,UAAC,OAAK,EAAW,cACxC,KAAC,QAAQ,EAAC,KAAK,CAAC,WAAW,UAAC,WAAS,EAAW,cAChD,KAAC,QAAQ,EAAC,KAAK,CAAC,WAAW,UAAC,WAAS,EAAW,GACzC,GACG,cACd,KAAC,MAAM,EACL,IAAI,CAAC,QAAQ,CACb,SAAS,MACT,OAAO,CAAC,WAAW,CACnB,KAAK,CAAC,SAAS,CACf,EAAE,CAAE,CAAED,EAAE,CAAE,CAAC,CAAEE,EAAE,CAAE,CAAE,CAAE,UACtB,iBAED,EAAS,GACL,GACF,EACI,CAEhB,CAAC,CAED,cAAe5B,eAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}