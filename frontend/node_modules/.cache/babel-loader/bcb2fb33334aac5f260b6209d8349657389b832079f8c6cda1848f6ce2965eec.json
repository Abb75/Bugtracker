{"ast":null,"code":"import _defineProperty from\"C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import TextField from'@mui/material/TextField';import Button from'@mui/material/Button';import Container from'@mui/material/Container';import Typography from'@mui/material/Typography';import Box from'@mui/material/Box';import Select from'@mui/material/Select';import MenuItem from'@mui/material/MenuItem';import FormControl from'@mui/material/FormControl';import InputLabel from'@mui/material/InputLabel';import{Helmet}from'react-helmet';import{useNavigate,useParams}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{PostBugProjectApi}from'../../redux/actions/bugActions';import{useEffect}from'react';import{GetCurrentUser,GetTokenUser}from'../../redux/selectors/userSelectors';import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var BugForm=function BugForm(){var _projectData$invitati;//const tokenUser = localStorage.getItem('access_token')\nvar tokenUser=GetTokenUser();var currentUser=GetCurrentUser();var dispatch=useDispatch();var guestUser=useSelector(function(state){return state.bugProject;});var projectData=useSelector(function(state){return state.projectDetails.projectDetails;});var navigate=useNavigate();var _useParams=useParams(),id=_useParams.id;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),invitation=_useState2[0],setInvitation=_useState2[1];var initialFormData={title:'',date:'',priority:'',status:'',assigned_to:'',created_by:currentUser.id,description:''};var _useState3=useState(initialFormData),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],setFormData=_useState4[1];var title=formData.title,date=formData.date,priority=formData.priority,description=formData.description,assigned_to=formData.assigned_to;var handleChange=function handleChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.id,e.target.value)));};var handleChangePriority=function handleChangePriority(e){setFormData(_objectSpread(_objectSpread({},formData),{},{priority:e.target.value}));};var handleChangeAssigned=function handleChangeAssigned(e){setFormData(_objectSpread(_objectSpread({},formData),{},{assigned_to:e.target.value}));};var handleSubmit=function handleSubmit(event){event.preventDefault();AddBug();};var AddBug=function AddBug(){console.log(id);formData['project']=id;console.log(formData);try{dispatch(PostBugProjectApi(id,formData,tokenUser));navigate(\"/project/\".concat(id));}catch(error){console.log(error);}};useEffect(function(){},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"Ajouter un bug\"})}),/*#__PURE__*/_jsx(Container,{maxWidth:\"sm\",children:/*#__PURE__*/_jsxs(Box,{sx:{marginTop:4,display:'flex',flexDirection:'column',alignItems:'center'},children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",children:\"New bug\"}),/*#__PURE__*/_jsxs(Box,{component:\"form\",noValidate:true,onSubmit:handleSubmit,sx:{mt:3},children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,variant:\"outlined\",margin:\"normal\",id:\"title\",label:\"Title\",value:title,onChange:handleChange,required:true,sx:{backgroundColor:'background.paper'}}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,variant:\"outlined\",margin:\"normal\",id:\"description\",label:\"Description\",multiline:true,rows:4,value:description,onChange:handleChange,sx:{backgroundColor:'background.paper'}}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,variant:\"outlined\",margin:\"normal\",id:\"date\",label:\"Date\",type:\"date\",value:date,InputLabelProps:{shrink:true},onChange:handleChange,sx:{backgroundColor:'background.paper'}}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,variant:\"outlined\",margin:\"normal\",children:[/*#__PURE__*/_jsx(InputLabel,{id:\"assigned_to_label\",children:\"Assign\\xE9 \\xE0\"}),/*#__PURE__*/_jsxs(Select,{id:\"assigned_to\",label:\"Assigned to\",value:assigned_to,onChange:handleChangeAssigned,sx:{backgroundColor:'background.paper'},children:[/*#__PURE__*/_jsx(MenuItem,{value:\"Unassigned\",children:\"Non assign\\xE9\"}),(_projectData$invitati=projectData.invitation)===null||_projectData$invitati===void 0?void 0:_projectData$invitati.map(function(item){return/*#__PURE__*/_jsx(MenuItem,{value:item.user_id,children:item.name},item.id);})]})]}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,variant:\"outlined\",margin:\"normal\",children:[/*#__PURE__*/_jsx(InputLabel,{id:\"priority-label\",children:\"Priorit\\xE9\"}),/*#__PURE__*/_jsxs(Select,{labelId:\"status-label\",id:\"priority\",label:\"Pirority\",onChange:handleChangePriority,value:priority,sx:{backgroundColor:'background.paper'},children:[/*#__PURE__*/_jsx(MenuItem,{value:\"Critical\",children:\"Critical\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"High\",children:\"High\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Normal\",children:\"Normal\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Low\",children:\"Low\"})]})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",color:\"primary\",sx:{mt:3,mb:2},children:\"Submit\"})]})]})})]});};","map":{"version":3,"names":["React","useState","TextField","Button","Container","Typography","Box","Select","MenuItem","FormControl","InputLabel","Helmet","useNavigate","useParams","useDispatch","useSelector","PostBugProjectApi","useEffect","GetCurrentUser","GetTokenUser","BugForm","tokenUser","currentUser","dispatch","guestUser","state","bugProject","projectData","projectDetails","navigate","id","invitation","setInvitation","initialFormData","title","date","priority","status","assigned_to","created_by","description","formData","setFormData","handleChange","e","target","value","handleChangePriority","handleChangeAssigned","handleSubmit","event","preventDefault","AddBug","console","log","error","marginTop","display","flexDirection","alignItems","mt","backgroundColor","shrink","map","item","user_id","name","mb"],"sources":["C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/src/components/forms/BugForm.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport TextField from '@mui/material/TextField';\r\nimport Button from '@mui/material/Button';\r\nimport Container from '@mui/material/Container';\r\nimport Typography from '@mui/material/Typography';\r\nimport Box from '@mui/material/Box';\r\nimport Select from '@mui/material/Select';\r\nimport MenuItem from '@mui/material/MenuItem';\r\nimport FormControl from '@mui/material/FormControl';\r\nimport InputLabel from '@mui/material/InputLabel';\r\nimport { Helmet } from 'react-helmet';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { PostBugProjectApi } from '../../redux/actions/bugActions';\r\nimport { useEffect } from 'react';\r\nimport { GetCurrentUser, GetTokenUser } from '../../redux/selectors/userSelectors';\r\n\r\n\r\nexport const BugForm = () => {\r\n  //const tokenUser = localStorage.getItem('access_token')\r\n  const tokenUser = GetTokenUser()\r\n  const currentUser = GetCurrentUser()\r\n  const dispatch = useDispatch()\r\n  const guestUser = useSelector(state => state.bugProject)\r\n  const projectData = useSelector(state => state.projectDetails.projectDetails)\r\n  const navigate = useNavigate()\r\n  const {id} = useParams()\r\n  const [invitation, setInvitation] = useState([])\r\n\r\n  const initialFormData = {\r\n    title: '',\r\n    date: '',\r\n    priority: '',\r\n    status: '',\r\n    assigned_to: '',\r\n    created_by: currentUser.id, \r\n    description: '',\r\n    \r\n  };\r\n\r\n  const [formData, setFormData] = useState(initialFormData);\r\n  const { title, date, priority, description, assigned_to } = formData;\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({\r\n      ...formData,\r\n      [e.target.id]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const handleChangePriority = (e) => {\r\n    setFormData({\r\n      ...formData,\r\n      priority: e.target.value,\r\n    });\r\n  };\r\n  \r\n  const handleChangeAssigned = (e) => {\r\n    setFormData({\r\n      ...formData,\r\n      assigned_to: e.target.value,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    AddBug()\r\n  };\r\n\r\n  const AddBug = () => {  \r\n    console.log(id)\r\n    formData['project'] = id\r\n    console.log(formData)\r\n    try{\r\n       dispatch(PostBugProjectApi(id,formData, tokenUser))\r\n       navigate(`/project/${id}`)\r\n    }\r\n    catch(error){\r\n      console.log(error)\r\n    }\r\n  } \r\n\r\n  \r\n\r\n \r\n\r\n  useEffect(() => {\r\n   \r\n  },[])\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>Ajouter un bug</title>\r\n      </Helmet>\r\n\r\n      <Container maxWidth=\"sm\">\r\n        <Box sx={{ marginTop: 4, display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\r\n          <Typography component=\"h1\" variant=\"h5\">\r\n           New bug\r\n          </Typography>\r\n          <Box component=\"form\" noValidate onSubmit={handleSubmit} sx={{ mt: 3 }}>\r\n            <TextField\r\n              fullWidth\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              id=\"title\"\r\n              label=\"Title\"\r\n              value={title}\r\n              onChange={handleChange}\r\n              required\r\n              sx={{ backgroundColor: 'background.paper' }}\r\n            />\r\n            <TextField\r\n              fullWidth\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              id=\"description\"\r\n              label=\"Description\"\r\n              multiline\r\n              rows={4}\r\n              value={description}\r\n              onChange={handleChange}\r\n              sx={{ backgroundColor: 'background.paper' }}\r\n            />\r\n            <TextField\r\n              fullWidth\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              id=\"date\"\r\n              label=\"Date\"\r\n              type=\"date\"\r\n              value={date}\r\n              InputLabelProps={{ shrink: true }}\r\n              onChange={handleChange}\r\n              sx={{ backgroundColor: 'background.paper' }}\r\n            />\r\n            <FormControl fullWidth variant=\"outlined\" margin=\"normal\">\r\n              <InputLabel id=\"assigned_to_label\">Assigné à</InputLabel>\r\n              <Select\r\n                id=\"assigned_to\"\r\n                label=\"Assigned to\"\r\n                value={assigned_to}\r\n                onChange={handleChangeAssigned}\r\n                sx={{ backgroundColor: 'background.paper' }}\r\n              >\r\n                <MenuItem value=\"Unassigned\">Non assigné</MenuItem>\r\n                {projectData.invitation?.map((item) => (\r\n                  <MenuItem key={item.id} value={item.user_id}>\r\n                    {item.name}\r\n                  </MenuItem>\r\n                ))}\r\n              </Select>\r\n            </FormControl>\r\n            <FormControl fullWidth variant=\"outlined\" margin=\"normal\">\r\n              <InputLabel id=\"priority-label\">Priorité</InputLabel>\r\n              <Select\r\n                labelId=\"status-label\"\r\n                id=\"priority\"\r\n                label=\"Pirority\"\r\n                onChange={handleChangePriority}\r\n                value={priority}\r\n                sx={{ backgroundColor: 'background.paper' }}\r\n              >\r\n                <MenuItem value=\"Critical\">Critical</MenuItem>\r\n                <MenuItem value=\"High\">High</MenuItem>\r\n                <MenuItem value=\"Normal\">Normal</MenuItem>\r\n                <MenuItem value=\"Low\">Low</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n            <Button\r\n              type=\"submit\"\r\n              fullWidth\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              sx={{ mt: 3, mb: 2 }}\r\n            >\r\n              Submit\r\n            </Button>\r\n          </Box>\r\n        </Box>\r\n      </Container>\r\n    </>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}