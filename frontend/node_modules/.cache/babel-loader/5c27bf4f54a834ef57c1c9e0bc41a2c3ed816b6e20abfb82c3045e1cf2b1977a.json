{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,Fragment}from'react';import{Container,TextField,Button,Typography,Box}from'@mui/material';import{GetCurrentUser}from'../../redux/selectors/userSelectors';import{UpdateUserBugApi}from'../../redux/actions/bugActions';import{UpdateUserInfoApi}from'../../redux/actions/userActions';import{SendErrorNotification,SendSuccessNotification}from'../Alert';import{useNavigate}from'react-router-dom';import{useDispatch}from'react-redux';import{GetUserApi}from'../../redux/actions/userActions';import{UpdateUserPasswordApi}from'../../redux/actions/userActions';import{GetTokenUser}from'../../redux/selectors/userSelectors';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var UserPassword=function UserPassword(){var tokenUser=GetTokenUser();var currentUser=GetCurrentUser();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),inputError=_useState2[0],setInputError=_useState2[1];var initialFormData=Object.freeze({password:'',confirm_password:''});var _useState3=useState(initialFormData),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],setFormData=_useState4[1];var password=formData.password,confirm_password=formData.confirm_password;var handleChange=function handleChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.id,e.target.value)));};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var new_error;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return UpdateUserPasswordApi(currentUser.id,formData,tokenUser);case 4:SendSuccessNotification('Password updated ! ');_context.next=13;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](1);console.error(_context.t0.response.data);SendErrorNotification('Update password failed !');new_error=Object.values(_context.t0.response.data);setInputError([new_error]);case 13:case\"end\":return _context.stop();}},_callee,null,[[1,7]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();useEffect(function(){setInputError([]);},[]);return/*#__PURE__*/_jsxs(Container,{maxWidth:\"sm\",style:{marginTop:'2rem'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,style:{marginBottom:'1.5rem'},children:\"New password\"}),/*#__PURE__*/_jsxs(Box,{component:\"form\",sx:{display:'flex',flexDirection:'column',gap:'1rem'},onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(TextField,{label:\"password\",type:\"password\",variant:\"outlined\",name:\"firstName\",id:\"password\",value:password,onChange:handleChange,sx:{backgroundColor:'background.paper'}}),/*#__PURE__*/_jsx(TextField,{type:\"password\",label:\"confirm password\",id:\"confirm_password\",variant:\"outlined\",name:\"firstName\",value:confirm_password,onChange:handleChange,sx:{backgroundColor:'background.paper'}}),inputError===null||inputError===void 0?void 0:inputError.map(function(error,index){return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsx(Typography,{alignItems:'center',variant:\"body2\",color:\"error\",children:error})});}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",type:\"submit\",sx:{marginTop:'1rem'},children:\"Save Changes\"})]})]});};","map":{"version":3,"names":["React","useEffect","useState","Fragment","Container","TextField","Button","Typography","Box","GetCurrentUser","UpdateUserBugApi","UpdateUserInfoApi","SendErrorNotification","SendSuccessNotification","useNavigate","useDispatch","GetUserApi","UpdateUserPasswordApi","GetTokenUser","UserPassword","tokenUser","currentUser","inputError","setInputError","initialFormData","Object","freeze","password","confirm_password","formData","setFormData","handleChange","e","target","id","value","handleSubmit","preventDefault","console","error","response","data","new_error","values","marginTop","marginBottom","display","flexDirection","gap","backgroundColor","map","index"],"sources":["C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/src/components/account/UpdatePassword.js"],"sourcesContent":["import React, { useEffect, useState, Fragment } from 'react';\r\nimport { Container, TextField, Button, Typography, Box } from '@mui/material';\r\nimport { GetCurrentUser } from '../../redux/selectors/userSelectors';\r\nimport { UpdateUserBugApi } from '../../redux/actions/bugActions';\r\nimport { UpdateUserInfoApi } from '../../redux/actions/userActions';\r\nimport { SendErrorNotification, SendSuccessNotification } from '../Alert';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useDispatch } from 'react-redux';\r\nimport { GetUserApi } from '../../redux/actions/userActions';\r\nimport { UpdateUserPasswordApi } from '../../redux/actions/userActions';\r\nimport { GetTokenUser } from '../../redux/selectors/userSelectors';\r\n\r\nexport const UserPassword = () => {\r\n\r\n  const tokenUser = GetTokenUser()\r\n  const currentUser = GetCurrentUser()\r\n  const [inputError, setInputError] = useState([])\r\n  const initialFormData = Object.freeze({\r\n    password : '',\r\n    confirm_password : ''\r\n  \r\n  })\r\n\r\n  const [formData, setFormData] = useState(initialFormData);\r\n  const {password, confirm_password} = formData\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({\r\n      ...formData,[e.target.id]: e.target.value\r\n  })\r\n  };\r\n\r\n\r\n    \r\n  const handleSubmit = async(e) => {\r\n    e.preventDefault();\r\n      try{\r\n          await UpdateUserPasswordApi(currentUser.id, formData, tokenUser)\r\n          SendSuccessNotification('Password updated ! ')\r\n    }catch(error){\r\n           console.error(error.response.data)\r\n           SendErrorNotification('Update password failed !')\r\n           const new_error = Object.values(error.response.data);\r\n           setInputError([new_error])\r\n         \r\n          \r\n         }\r\n       \r\n\r\n   } \r\n\r\n   useEffect(() => {\r\n    setInputError([])\r\n   }, [])\r\n  \r\n\r\n  return (\r\n    <Container maxWidth=\"sm\" style={{ marginTop: '2rem' }}>\r\n      <Typography variant=\"h4\" gutterBottom style={{ marginBottom: '1.5rem' }}>\r\n       New password\r\n      </Typography>\r\n      <Box\r\n        component=\"form\"\r\n        sx={{\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          gap: '1rem',\r\n        }}\r\n        onSubmit={handleSubmit}\r\n      >\r\n        <TextField\r\n          label='password'\r\n          type='password'\r\n          variant=\"outlined\"\r\n          name=\"firstName\"\r\n          id='password'\r\n          value={password}\r\n          onChange={handleChange}\r\n          sx={{ backgroundColor: 'background.paper' }}\r\n        />\r\n        <TextField\r\n          type='password'\r\n          label=\"confirm password\"\r\n          id='confirm_password'\r\n          variant=\"outlined\"\r\n          name=\"firstName\"\r\n          value={confirm_password}\r\n          onChange={handleChange}\r\n          sx={{ backgroundColor: 'background.paper' }}\r\n        />\r\n       {inputError?.map((error, index) => (\r\n              <Fragment>\r\n                  <Typography alignItems={'center'} variant=\"body2\" color=\"error\">\r\n                      {error}\r\n                  </Typography> \r\n    \r\n              </Fragment>\r\n              )\r\n              )\r\n            }\r\n        \r\n       \r\n        <Button variant=\"contained\" color=\"primary\" type=\"submit\" sx={{ marginTop: '1rem' }}>\r\n          Save Changes\r\n        </Button>\r\n      </Box>\r\n    </Container>\r\n  );\r\n};\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}