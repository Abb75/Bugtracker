{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,Fragment}from'react';import{Container,TextField,Button,Typography,Box}from'@mui/material';import{GetCurrentUser}from'../../redux/selectors/userSelectors';import{UpdateUserBugApi}from'../../redux/actions/bugActions';import{UpdateUserInfoApi}from'../../redux/actions/userActions';import{SendErrorNotification,SendSuccessNotification}from'../Alert';import{useNavigate}from'react-router-dom';import{useDispatch}from'react-redux';import{GetUserApi}from'../../redux/actions/userActions';import{GetTokenUser}from'../../redux/selectors/userSelectors';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var UserProfile=function UserProfile(){var dispatch=useDispatch();var navigate=useNavigate();var tokenUser=GetTokenUser();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),inputError=_useState2[0],setInputError=_useState2[1];var currentUser=GetCurrentUser();var initialFormData=Object.freeze({first_name:currentUser.first_name,last_name:currentUser.last_name,email:currentUser.email});var _useState3=useState(initialFormData),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],setFormData=_useState4[1];var first_name=formData.first_name,last_name=formData.last_name,email=formData.email;var handleChange=function handleChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.id,e.target.value)));};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var new_error;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return UpdateUserInfoApi(currentUser.id,formData,tokenUser);case 4:_context.next=6;return dispatch(GetUserApi(localStorage.getItem('id')));case 6:SendSuccessNotification('Update profile with success !');navigate('/dashboard');_context.next=15;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);new_error=Object.values(_context.t0.response.data);setInputError([new_error]);SendErrorNotification('Update profile failed !');case 15:case\"end\":return _context.stop();}},_callee,null,[[1,10]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();useEffect(function(){setInputError([]);},[]);return/*#__PURE__*/_jsxs(Container,{maxWidth:\"sm\",style:{marginTop:'2rem'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,style:{marginBottom:'1.5rem'},children:\"User Profile\"}),/*#__PURE__*/_jsxs(Box,{component:\"form\",sx:{display:'flex',flexDirection:'column',gap:'1rem'},onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(TextField,{label:\"first name\",variant:\"outlined\",name:\"firstName\",id:\"first_name\",value:first_name,onChange:handleChange,sx:{backgroundColor:'background.paper'}}),/*#__PURE__*/_jsx(TextField,{label:\"Last Name\",id:\"last_name\",variant:\"outlined\",name:\"firstName\",value:last_name,onChange:handleChange,sx:{backgroundColor:'background.paper'}}),/*#__PURE__*/_jsx(TextField,{label:\"Email\",id:\"email\",variant:\"outlined\",name:\"firstName\",value:email,onChange:handleChange,sx:{backgroundColor:'background.paper'}}),inputError===null||inputError===void 0?void 0:inputError.map(function(error,index){return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsx(Typography,{alignItems:'center',variant:\"body2\",color:\"error\",children:error})});}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",type:\"submit\",sx:{marginTop:'1rem'},children:\"Save Changes\"})]})]});};","map":{"version":3,"names":["React","useEffect","useState","Fragment","Container","TextField","Button","Typography","Box","GetCurrentUser","UpdateUserBugApi","UpdateUserInfoApi","SendErrorNotification","SendSuccessNotification","useNavigate","useDispatch","GetUserApi","GetTokenUser","UserProfile","dispatch","navigate","tokenUser","inputError","setInputError","currentUser","initialFormData","Object","freeze","first_name","last_name","email","formData","setFormData","handleChange","e","target","id","value","handleSubmit","preventDefault","localStorage","getItem","new_error","values","response","data","marginTop","marginBottom","display","flexDirection","gap","backgroundColor","map","error","index"],"sources":["C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/src/components/account/infoUser.js"],"sourcesContent":["import React, { useEffect, useState, Fragment } from 'react';\r\nimport { Container, TextField, Button, Typography, Box } from '@mui/material';\r\nimport { GetCurrentUser } from '../../redux/selectors/userSelectors';\r\nimport { UpdateUserBugApi } from '../../redux/actions/bugActions';\r\nimport { UpdateUserInfoApi } from '../../redux/actions/userActions';\r\nimport { SendErrorNotification, SendSuccessNotification } from '../Alert';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useDispatch } from 'react-redux';\r\nimport { GetUserApi } from '../../redux/actions/userActions';\r\nimport { GetTokenUser } from '../../redux/selectors/userSelectors';\r\n\r\nexport const UserProfile = () => {\r\n \r\n  const dispatch = useDispatch()\r\n  const navigate = useNavigate() \r\n  const tokenUser = GetTokenUser()\r\n  const [inputError, setInputError] = useState([])\r\n  const currentUser = GetCurrentUser()\r\n\r\n  const initialFormData = Object.freeze({\r\n\r\n    first_name: currentUser.first_name,\r\n    last_name: currentUser.last_name,\r\n    email : currentUser.email,\r\n    \r\n  \r\n  })\r\n\r\n  const [formData, setFormData] = useState(initialFormData);\r\n  const {first_name, last_name, email} = formData\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({\r\n      ...formData,[e.target.id]: e.target.value\r\n  })\r\n  };\r\n\r\n  const handleSubmit = async(e) => {\r\n    e.preventDefault();\r\n    try{\r\n      await UpdateUserInfoApi(currentUser.id, formData, tokenUser)\r\n      await dispatch(GetUserApi(localStorage.getItem('id'))); \r\n      SendSuccessNotification('Update profile with success !')\r\n      navigate('/dashboard')\r\n    }catch(error){\r\n      const new_error = Object.values(error.response.data);\r\n      setInputError([new_error])\r\n      SendErrorNotification('Update profile failed !')\r\n    }\r\n   }\r\n   \r\n  useEffect(() => {\r\n    setInputError([])\r\n  }, [])\r\n\r\n  return (\r\n    <Container maxWidth=\"sm\" style={{ marginTop: '2rem' }}>\r\n      <Typography variant=\"h4\" gutterBottom style={{ marginBottom: '1.5rem' }}>\r\n        User Profile\r\n      </Typography>\r\n      <Box\r\n        component=\"form\"\r\n        sx={{\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          gap: '1rem',\r\n        }}\r\n        onSubmit={handleSubmit}\r\n      >\r\n        <TextField\r\n          label='first name'\r\n          variant=\"outlined\"\r\n          name=\"firstName\"\r\n          id='first_name'\r\n          value={first_name}\r\n          onChange={handleChange}\r\n          sx={{ backgroundColor: 'background.paper' }}\r\n        />\r\n        <TextField\r\n          label=\"Last Name\"\r\n          id='last_name'\r\n          variant=\"outlined\"\r\n          name=\"firstName\"\r\n          value={last_name}\r\n          onChange={handleChange}\r\n          sx={{ backgroundColor: 'background.paper' }}\r\n        />\r\n        <TextField\r\n          label=\"Email\"\r\n          id='email'\r\n          variant=\"outlined\"\r\n          name=\"firstName\"\r\n          value={email}\r\n          onChange={handleChange}\r\n          sx={{ backgroundColor: 'background.paper' }}\r\n        />\r\n         {inputError?.map((error, index) => (\r\n              <Fragment>\r\n                  <Typography alignItems={'center'} variant=\"body2\" color=\"error\">\r\n      \r\n                      {error}\r\n                  </Typography> \r\n    \r\n              </Fragment>\r\n              )\r\n              )\r\n            }\r\n        \r\n       \r\n        <Button variant=\"contained\" color=\"primary\" type=\"submit\" sx={{ marginTop: '1rem' }}>\r\n          Save Changes\r\n        </Button>\r\n      </Box>\r\n    </Container>\r\n  );\r\n};\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}