{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import{Container,Typography,Card,CardContent,Button,MenuItem,IconButton,Grid,Menu}from'@mui/material';import{GetProjectArchivedApi}from'../../redux/actions/projectActions';import{ArchivedProjectData}from'../../redux/selectors/projectSelectors';import{useDispatch}from'react-redux';import{UpdateProjectArchivedApi}from'../../redux/actions/projectActions';import MoreVertIcon from'@mui/icons-material/MoreVert';import DeleteIcon from'@mui/icons-material/Delete';import{SendSuccessNotification}from'../../components/Alert';import ModalConfirmation from'../../components/dialog/DeleteProject';import AlertDialog from'../../components/dialog/DeleteProject';import DeleteProjectDialog from'../../components/dialog/DeleteProject';import{GetCurrentUser,GetTokenUser}from'../../redux/selectors/userSelectors';import{GetBugArchivedApi}from'../../redux/actions/bugActions';import{UpdateBugArchivedApi}from'../../redux/actions/bugActions';import{GetBugArchived}from'../../redux/selectors/bugSelectors';import DeleteBugDialog from'../../components/dialog/DeleteBug';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var ArchivedBug=function ArchivedBug(){var currentUser=GetCurrentUser();var dispatch=useDispatch();//const tokenUser = localStorage.getItem('access_token')\nvar tokenUser=GetTokenUser();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),bugs=_useState2[0],setBugs=_useState2[1];var bugsArchived=GetBugArchived();console.log(bugsArchived);var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),anchorEl=_useState4[0],setAnchorEl=_useState4[1];var handleClick=function handleClick(event,projectId){setAnchorEl(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},projectId,event.currentTarget));});};var handleClose=function handleClose(projectId){setAnchorEl(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},projectId,null));});};var handleMenuItemClick=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(projectId,bugId){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:console.log(bugId,projectId);// Add your logic here based on the selected option\n_context.prev=1;_context.next=4;return UpdateBugArchivedApi(projectId,bugId,tokenUser,false,null);case 4:SendSuccessNotification('Bug unarchived with success');dispatch(GetBugArchivedApi(tokenUser));_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.error(_context.t0);case 11:handleClose();case 12:case\"end\":return _context.stop();}},_callee,null,[[1,8]]);}));return function handleMenuItemClick(_x,_x2){return _ref.apply(this,arguments);};}();useEffect(function(){try{dispatch(GetBugArchivedApi(tokenUser));}catch(error){console.error(error);}},[tokenUser]);useEffect(function(){setBugs(bugsArchived);},[bugsArchived]);return/*#__PURE__*/_jsxs(Container,{maxWidth:\"md\",sx:{mt:5},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",sx:{mb:3},children:\"Archived Bug(s)\"}),bugs===null||bugs===void 0?void 0:bugs.map(function(bug){return/*#__PURE__*/_jsx(Card,{style:{height:'140px',width:'900px'},sx:{mb:2},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Grid,{marginLeft:'10px',container:true,justifyContent:\"space-between\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Typography,{marginLeft:'20px',variant:\"h6\",component:\"div\",sx:{mb:1,textAlign:'center',flex:1},children:/*#__PURE__*/_jsx(\"strong\",{children:bug.title})}),/*#__PURE__*/_jsxs(Grid,{children:[/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(event){return handleClick(event,bug.id);},children:/*#__PURE__*/_jsx(MoreVertIcon,{})}),/*#__PURE__*/_jsx(Menu,{anchorEl:anchorEl[bug.id],open:Boolean(anchorEl[bug.id]),onClose:function onClose(){return handleClose(bug.id);},children:/*#__PURE__*/_jsx(MenuItem,{value:bug.id,onClick:function onClick(event){return handleMenuItemClick(bug.project_id,bug.id);},children:\"unarchive\"})})]}),/*#__PURE__*/_jsx(Grid,{children:currentUser.groups[0]==='admin'?/*#__PURE__*/_jsx(DeleteBugDialog,{bug:bug.id,project:bug.project_id}):null})]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"Archiv\\xE9 le ; \",/*#__PURE__*/_jsx(\"strong\",{children:bug.date})]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"Archiv\\xE9 par:  \",/*#__PURE__*/_jsx(\"strong\",{children:bug.archived_by})]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"Project :  \",/*#__PURE__*/_jsx(\"strong\",{children:bug.project})]})]})},bug.id);}),(bugs===null||bugs===void 0?void 0:bugs.length)===0&&/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{mt:3},children:\"No archived bugs at the moment.\"})]});};","map":{"version":3,"names":["useEffect","useState","Container","Typography","Card","CardContent","Button","MenuItem","IconButton","Grid","Menu","GetProjectArchivedApi","ArchivedProjectData","useDispatch","UpdateProjectArchivedApi","MoreVertIcon","DeleteIcon","SendSuccessNotification","ModalConfirmation","AlertDialog","DeleteProjectDialog","GetCurrentUser","GetTokenUser","GetBugArchivedApi","UpdateBugArchivedApi","GetBugArchived","DeleteBugDialog","ArchivedBug","currentUser","dispatch","tokenUser","bugs","setBugs","bugsArchived","console","log","anchorEl","setAnchorEl","handleClick","event","projectId","prevState","currentTarget","handleClose","handleMenuItemClick","bugId","error","mt","mb","map","bug","height","width","textAlign","flex","title","id","Boolean","project_id","groups","date","archived_by","project","length"],"sources":["C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/src/pages/ArchivedBug/BugList.js"],"sourcesContent":["\r\n\r\nimport {useEffect, useState} from 'react';\r\nimport { Container, Typography, Card, CardContent, Button , MenuItem, IconButton, Grid, Menu} from '@mui/material';\r\nimport { GetProjectArchivedApi } from '../../redux/actions/projectActions';\r\nimport { ArchivedProjectData } from '../../redux/selectors/projectSelectors';\r\nimport { useDispatch } from 'react-redux';\r\nimport { UpdateProjectArchivedApi } from '../../redux/actions/projectActions';\r\nimport MoreVertIcon from '@mui/icons-material/MoreVert';\r\nimport DeleteIcon from '@mui/icons-material/Delete';\r\nimport { SendSuccessNotification } from '../../components/Alert';\r\nimport ModalConfirmation from '../../components/dialog/DeleteProject';\r\nimport AlertDialog from '../../components/dialog/DeleteProject';\r\nimport DeleteProjectDialog from '../../components/dialog/DeleteProject';\r\nimport { GetCurrentUser, GetTokenUser } from '../../redux/selectors/userSelectors';\r\nimport { GetBugArchivedApi } from '../../redux/actions/bugActions';\r\nimport { UpdateBugArchivedApi } from '../../redux/actions/bugActions';\r\nimport { GetBugArchived } from '../../redux/selectors/bugSelectors';\r\nimport DeleteBugDialog from '../../components/dialog/DeleteBug';\r\n\r\nexport const ArchivedBug = () => {\r\n  const currentUser = GetCurrentUser()\r\n  const dispatch = useDispatch()\r\n  //const tokenUser = localStorage.getItem('access_token')\r\n  const tokenUser = GetTokenUser()\r\n  const [bugs, setBugs] = useState([])\r\n  const bugsArchived = GetBugArchived()\r\n  console.log(bugsArchived)\r\n  const [anchorEl, setAnchorEl] = useState({});\r\n\r\n     \r\n  const handleClick = (event, projectId) => {\r\n    setAnchorEl(prevState => ({\r\n      ...prevState,\r\n      [projectId]: event.currentTarget,\r\n    }));\r\n  };\r\n  \r\n  const handleClose = (projectId) => {\r\n    setAnchorEl(prevState => ({\r\n      ...prevState,\r\n      [projectId]: null,\r\n    }));\r\n  };\r\n\r\n  const handleMenuItemClick = async( projectId, bugId) => {\r\n    console.log(bugId, projectId)\r\n    // Add your logic here based on the selected option\r\n\r\n    try{\r\n      await UpdateBugArchivedApi(projectId, bugId,tokenUser,false, null )\r\n      SendSuccessNotification('Bug unarchived with success')\r\n      dispatch(GetBugArchivedApi(tokenUser))\r\n    }catch(error){\r\n      console.error(error)\r\n    }\r\n   \r\n    handleClose();\r\n  };\r\n\r\n  \r\n\r\n  useEffect(() => {\r\n    try {\r\n      dispatch(GetBugArchivedApi(tokenUser))\r\n\r\n    }\r\n    catch(error){\r\n      console.error(error)\r\n    }\r\n  }, [tokenUser] )\r\n\r\n  useEffect(() => {\r\n    \r\n    setBugs(bugsArchived)\r\n    \r\n  }, [bugsArchived] )\r\n\r\n\r\n  return (\r\n\r\n   \r\n      <Container maxWidth=\"md\" sx={{ mt: 5 }}>\r\n      <Typography variant=\"h4\" sx={{ mb: 3 }}>\r\n        Archived Bug(s)\r\n      </Typography>\r\n\r\n      {bugs?.map((bug) => (\r\n        <Card style={{ height: '140px', width: '900px' }} key={bug.id} sx={{ mb: 2 }}>\r\n          <CardContent>\r\n            <Grid marginLeft={'10px'} container justifyContent='space-between' alignItems=\"center\">\r\n              {/* Titre du projet, centr√© */}\r\n              <Typography marginLeft={'20px'} variant=\"h6\" component=\"div\" sx={{ mb: 1, textAlign: 'center', flex: 1 }}>\r\n              <strong>{bug.title}</strong>\r\n              </Typography>\r\n\r\n              {/* Ic√¥nes √† droite du titre */}\r\n              <Grid>\r\n                <IconButton onClick={(event) => handleClick(event, bug.id)}>\r\n                  <MoreVertIcon />\r\n                </IconButton>\r\n                <Menu\r\n                  anchorEl={anchorEl[bug.id]}\r\n                  open={Boolean(anchorEl[bug.id])}\r\n                  onClose={() => handleClose(bug.id)}\r\n                >\r\n                  <MenuItem\r\n                    value={bug.id}\r\n                    onClick={(event) => handleMenuItemClick( bug.project_id, bug.id)}\r\n                  >\r\n                    unarchive\r\n                  </MenuItem>\r\n                </Menu>\r\n              </Grid>\r\n\r\n              <Grid>\r\n              {currentUser.groups[0] === 'admin' ? ( \r\n                    <DeleteBugDialog bug={bug.id} project={bug.project_id} />) :\r\n                  (null)}\r\n              \r\n               \r\n              </Grid>\r\n             \r\n            </Grid>\r\n\r\n            {/* Autres informations */}\r\n          \r\n            <Typography variant=\"body2\" color=\"text.secondary\">\r\n              Archiv√© le ; <strong>{bug.date}</strong>\r\n            </Typography>\r\n            <Typography variant=\"body2\" color=\"text.secondary\">\r\n              Archiv√© par:  <strong>{bug.archived_by}</strong>\r\n              </Typography>\r\n            <Typography variant=\"body2\" color=\"text.secondary\">\r\n              Project :  <strong>{bug.project}</strong>\r\n            </Typography>\r\n          </CardContent>\r\n        </Card>\r\n      ))}\r\n\r\n      {bugs?.length === 0 && (\r\n        <Typography variant=\"body1\" sx={{ mt: 3 }}>\r\n          No archived bugs at the moment.\r\n        </Typography>\r\n      )}\r\n    </Container>\r\n\r\n\r\n    \r\n   \r\n  );\r\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}