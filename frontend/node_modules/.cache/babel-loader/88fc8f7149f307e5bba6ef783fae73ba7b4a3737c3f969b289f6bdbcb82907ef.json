{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import TextField from'@mui/material/TextField';import Button from'@mui/material/Button';import Container from'@mui/material/Container';import Typography from'@mui/material/Typography';import Box from'@mui/material/Box';import Select from'@mui/material/Select';import MenuItem from'@mui/material/MenuItem';import FormControl from'@mui/material/FormControl';import InputLabel from'@mui/material/InputLabel';import{Helmet}from'react-helmet';import{useNavigate,useParams}from'react-router-dom';import{useDispatch}from'react-redux';import{PostProjectApi}from'../../redux/actions/projectActions';import{GetCurrentUser,GetTokenUser}from'../../redux/selectors/userSelectors';import{Toaster,toast}from'sonner';import{SendSuccessNotification}from'../Alert';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var ProjectForm=function ProjectForm(){//const tokenUser = localStorage.getItem('access_token')\nvar tokenUser=GetTokenUser();var currentUser=GetCurrentUser();var _useParams=useParams(),id=_useParams.id;var dispatch=useDispatch();var initialFormData={name:'',description:'',submission_date:'',project_duration:'',admin:currentUser.id,project_lead:'',status:''};var navigate=useNavigate();var _useState=useState(initialFormData),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var date=new Date();var actualDate=\"\".concat(date.getDate(),\"/\").concat(date.getMonth()+1,\"/\").concat(date.getFullYear());var name=formData.name,description=formData.description,submission_date=formData.submission_date,project_duration=formData.project_duration,project_lead=formData.project_lead,status=formData.status;var handleChange=function handleChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.id,e.target.value)));};var handleChangeStatus=function handleChangeStatus(e){setFormData(_objectSpread(_objectSpread({},formData),{},{status:e.target.value}));};var handleChangeDescription=function handleChangeDescription(e){setFormData(_objectSpread(_objectSpread({},formData),{},{description:e.target.value}));};var handleSubmit=function handleSubmit(event){event.preventDefault();AddProject();};var AddProject=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;formData.submission_date=actualDate;_context.next=4;return dispatch(PostProjectApi(formData,tokenUser));case 4:SendSuccessNotification('Project created with success');navigate(\"/project\");_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function AddProject(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Container,{maxWidth:\"sm\",children:/*#__PURE__*/_jsxs(Box,{sx:{marginTop:4,display:'flex',flexDirection:'column',alignItems:'center'},children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",children:\"Ajouter un projet\"}),/*#__PURE__*/_jsxs(Box,{component:\"form\",noValidate:true,onSubmit:handleSubmit,sx:{mt:3},children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,id:\"name\",variant:\"outlined\",margin:\"normal\",name:\"recipientEmail\",label:\"Name\",value:name,onChange:handleChange,required:true,sx:{backgroundColor:'background.paper'}}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,id:\"submission_date\",variant:\"outlined\",margin:\"normal\",helperText:\"Date of creation\",label:\"Submission date\",defaultValue:actualDate,sx:{backgroundColor:'background.paper'},required:true}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,id:\"project_duration\",variant:\"outlined\",margin:\"normal\",helperText:\"End of creation\",value:project_duration,onChange:handleChange,type:\"date\",required:true,sx:{backgroundColor:'background.paper'}}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,id:\"project_lead\",variant:\"outlined\",margin:\"normal\",label:\"Project lead\",value:project_lead,onChange:handleChange,sx:{backgroundColor:'background.paper'},required:true}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,id:\"description\",variant:\"outlined\",margin:\"normal\",name:\"Description\",label:\"Description\",multiline:true,rows:4,value:description,onChange:handleChangeDescription,sx:{backgroundColor:'background.paper'}}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,variant:\"outlined\",margin:\"normal\",children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Priority\"}),/*#__PURE__*/_jsxs(Select,{id:\"status\",name:\"status\",label:\"status\",value:status,onChange:handleChangeStatus,sx:{backgroundColor:'background.paper'},children:[/*#__PURE__*/_jsx(MenuItem,{value:\"Critical\",children:\"Critical\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"High\",children:\"High\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Normal\",children:\"Normal\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Low\",children:\"Low\"})]})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",color:\"primary\",children:\"Creer le projet\"})]})]})});};","map":{"version":3,"names":["React","useState","TextField","Button","Container","Typography","Box","Select","MenuItem","FormControl","InputLabel","Helmet","useNavigate","useParams","useDispatch","PostProjectApi","GetCurrentUser","GetTokenUser","Toaster","toast","SendSuccessNotification","ProjectForm","tokenUser","currentUser","id","dispatch","initialFormData","name","description","submission_date","project_duration","admin","project_lead","status","navigate","formData","setFormData","date","Date","actualDate","getDate","getMonth","getFullYear","handleChange","e","target","value","handleChangeStatus","handleChangeDescription","handleSubmit","event","preventDefault","AddProject","console","error","marginTop","display","flexDirection","alignItems","mt","backgroundColor"],"sources":["C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/src/components/forms/ProjectForm.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport TextField from '@mui/material/TextField';\r\nimport Button from '@mui/material/Button';\r\nimport Container from '@mui/material/Container';\r\nimport Typography from '@mui/material/Typography';\r\nimport Box from '@mui/material/Box';\r\nimport Select from '@mui/material/Select';\r\nimport MenuItem from '@mui/material/MenuItem';\r\nimport FormControl from '@mui/material/FormControl';\r\nimport InputLabel from '@mui/material/InputLabel';\r\nimport { Helmet } from 'react-helmet';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport { useDispatch } from 'react-redux';\r\nimport { PostProjectApi } from '../../redux/actions/projectActions';\r\nimport { GetCurrentUser, GetTokenUser } from '../../redux/selectors/userSelectors';\r\nimport { Toaster, toast } from 'sonner'\r\nimport { SendSuccessNotification } from '../Alert';\r\n\r\nexport const ProjectForm = () => {  \r\n  //const tokenUser = localStorage.getItem('access_token')\r\n  const tokenUser = GetTokenUser()\r\n  const currentUser = GetCurrentUser()\r\n  const {id} = useParams()\r\n  const dispatch = useDispatch()\r\n  const initialFormData = {\r\n    name: '',\r\n    description: '',\r\n    submission_date: '',\r\n    project_duration: '',\r\n    admin: currentUser.id,\r\n    project_lead: '',\r\n    status: '',\r\n\r\n  };\r\n  const navigate = useNavigate();\r\n  const [formData, setFormData] = useState(initialFormData);\r\n  const date = new Date();\r\n  const actualDate = `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()}`;\r\n  const { name, description, submission_date, project_duration, project_lead, status } = formData;\r\n\r\n  const handleChange = (e) => {\r\n  \r\n    setFormData({\r\n      ...formData,\r\n      [e.target.id]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const handleChangeStatus = (e) => {\r\n   \r\n    setFormData({\r\n      ...formData,\r\n      status: e.target.value,\r\n    });\r\n  };\r\n\r\n  const handleChangeDescription = (e) => {\r\n    setFormData({\r\n      ...formData,\r\n      description: e.target.value,\r\n    });\r\n  };\r\n\r\n\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    AddProject();\r\n  };\r\n\r\n  const AddProject = async() => {\r\n    try{\r\n      formData.submission_date = actualDate\r\n      await dispatch(PostProjectApi(formData, tokenUser))\r\n      SendSuccessNotification('Project created with success')\r\n      navigate(`/project`)\r\n    }catch(error){\r\n      console.error(error)\r\n    }\r\n  }\r\n   \r\n\r\n  return (\r\n  \r\n      <Container maxWidth=\"sm\">\r\n        <Box sx={{ marginTop: 4, display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\r\n          <Typography component=\"h1\" variant=\"h5\">\r\n           Ajouter un projet\r\n          </Typography>\r\n          <Box component=\"form\" noValidate onSubmit={handleSubmit} sx={{ mt: 3 }}>\r\n          <TextField\r\n              fullWidth\r\n              id='name'\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              name=\"recipientEmail\"\r\n              label=\"Name\"\r\n              value={name}\r\n              onChange={handleChange}\r\n              required\r\n              sx={{ backgroundColor: 'background.paper' }}\r\n            />\r\n            <TextField\r\n              fullWidth\r\n              id='submission_date'\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              helperText=\"Date of creation\"\r\n              label=\"Submission date\"\r\n              defaultValue={actualDate}\r\n              sx={{ backgroundColor: 'background.paper' }}\r\n              \r\n              required\r\n            />\r\n             <TextField\r\n              fullWidth\r\n              id='project_duration'\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              helperText=\"End of creation\"\r\n              value={project_duration}\r\n              onChange={handleChange}\r\n              type=\"date\"\r\n              required\r\n              sx={{ backgroundColor: 'background.paper' }}\r\n            />\r\n            <TextField\r\n              fullWidth\r\n              id='project_lead'\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              label=\"Project lead\"\r\n              value={project_lead}\r\n              onChange={handleChange}\r\n              sx={{ backgroundColor: 'background.paper' }}\r\n              required\r\n            />\r\n           \r\n            <TextField\r\n              fullWidth\r\n              id='description'\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              name=\"Description\"\r\n              label=\"Description\"\r\n              multiline\r\n              rows={4}\r\n              value={description}\r\n              onChange={handleChangeDescription}\r\n              sx={{ backgroundColor: 'background.paper' }}\r\n            />\r\n            <FormControl fullWidth variant=\"outlined\" margin=\"normal\">\r\n              <InputLabel>Priority</InputLabel>\r\n              <Select\r\n              id='status'\r\n                name=\"status\"\r\n                label=\"status\"\r\n                value={status}\r\n                onChange={handleChangeStatus}\r\n                sx={{ backgroundColor: 'background.paper' }}\r\n              >\r\n                 <MenuItem value=\"Critical\">Critical</MenuItem>\r\n                  <MenuItem value=\"High\">High</MenuItem>\r\n                   <MenuItem value=\"Normal\">Normal</MenuItem>\r\n                  <MenuItem value=\"Low\">Low</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n            <Button\r\n              type=\"submit\"\r\n              fullWidth\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              \r\n            >\r\n              Creer le projet\r\n            </Button>\r\n          </Box>\r\n        </Box>\r\n      </Container>\r\n    );\r\n  };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}