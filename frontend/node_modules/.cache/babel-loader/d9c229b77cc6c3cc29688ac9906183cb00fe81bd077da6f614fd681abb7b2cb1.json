{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import{Container,Typography,Card,CardContent,Button,MenuItem,IconButton,Grid,Menu}from'@mui/material';import{GetProjectArchivedApi}from'../../redux/actions/projectActions';import{ArchivedProjectData}from'../../redux/selectors/projectSelectors';import{useDispatch}from'react-redux';import{UpdateProjectArchivedApi}from'../../redux/actions/projectActions';import MoreVertIcon from'@mui/icons-material/MoreVert';import DeleteIcon from'@mui/icons-material/Delete';import{SendSuccessNotification}from'../../components/Alert';import ModalConfirmation from'../../components/dialog/DeleteProject';import AlertDialog from'../../components/dialog/DeleteProject';import DeleteProjectDialog from'../../components/dialog/DeleteProject';import{GetCurrentUser,GetTokenUser}from'../../redux/selectors/userSelectors';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var ArchivedProject=function ArchivedProject(){var tokenUser=GetTokenUser();var dispatch=useDispatch();//const tokenUser = localStorage.getItem('access_token')\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),projects=_useState2[0],setProjects=_useState2[1];var archivedProjects=ArchivedProjectData();console.log(archivedProjects);var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),anchorEl=_useState4[0],setAnchorEl=_useState4[1];var handleClick=function handleClick(event,projectId){setAnchorEl(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},projectId,event.currentTarget));});};var handleClose=function handleClose(projectId){setAnchorEl(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},projectId,null));});};var handleMenuItemClick=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e,projectId){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:console.log(projectId);// Add your logic here based on the selected option\n_context.prev=1;_context.next=4;return UpdateProjectArchivedApi(projectId,tokenUser,false);case 4:SendSuccessNotification('Project unarchived with success');dispatch(GetProjectArchivedApi(tokenUser));_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.error(_context.t0);case 11:handleClose();case 12:case\"end\":return _context.stop();}},_callee,null,[[1,8]]);}));return function handleMenuItemClick(_x,_x2){return _ref.apply(this,arguments);};}();useEffect(function(){try{dispatch(GetProjectArchivedApi(tokenUser));}catch(error){console.error(error);}},[tokenUser]);useEffect(function(){setProjects(archivedProjects);},[archivedProjects]);return/*#__PURE__*/_jsxs(Container,{maxWidth:\"md\",sx:{mt:5},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",sx:{mb:3},children:\"Archived project(s)\"}),projects===null||projects===void 0?void 0:projects.map(function(project){return/*#__PURE__*/_jsx(Card,{style:{height:'160px',width:'900px'},sx:{mb:2},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Grid,{marginLeft:'10px',container:true,justifyContent:\"space-between\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Typography,{marginLeft:'50px',variant:\"h6\",component:\"div\",sx:{mb:1,textAlign:'center',flex:1},children:/*#__PURE__*/_jsx(\"strong\",{children:project.name})}),/*#__PURE__*/_jsxs(Grid,{children:[/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(event){return handleClick(event,project.id);},children:/*#__PURE__*/_jsx(MoreVertIcon,{})}),/*#__PURE__*/_jsx(Menu,{anchorEl:anchorEl[project.id],open:Boolean(anchorEl[project.id]),onClose:function onClose(){return handleClose(project.id);},children:/*#__PURE__*/_jsx(MenuItem,{value:project.id,onClick:function onClick(event){return handleMenuItemClick(event,project.id);},children:\"unarchive\"})})]}),/*#__PURE__*/_jsx(Grid,{children:/*#__PURE__*/_jsx(DeleteProjectDialog,{project:project.id})})]}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\"})]})},project.id);}),(projects===null||projects===void 0?void 0:projects.length)===0&&/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{mt:3},children:\"No archived projects at the moment.\"})]});};","map":{"version":3,"names":["useEffect","useState","Container","Typography","Card","CardContent","Button","MenuItem","IconButton","Grid","Menu","GetProjectArchivedApi","ArchivedProjectData","useDispatch","UpdateProjectArchivedApi","MoreVertIcon","DeleteIcon","SendSuccessNotification","ModalConfirmation","AlertDialog","DeleteProjectDialog","GetCurrentUser","GetTokenUser","ArchivedProject","tokenUser","dispatch","projects","setProjects","archivedProjects","console","log","anchorEl","setAnchorEl","handleClick","event","projectId","prevState","currentTarget","handleClose","handleMenuItemClick","e","error","mt","mb","map","project","height","width","textAlign","flex","name","id","Boolean","length"],"sources":["C:/Users/Alexandre Brosseau/Desktop/bug_tracker/frontend/src/pages/ArchivedProject/ProjectList.js"],"sourcesContent":["\r\n\r\nimport {useEffect, useState} from 'react';\r\nimport { Container, Typography, Card, CardContent, Button , MenuItem, IconButton, Grid, Menu} from '@mui/material';\r\nimport { GetProjectArchivedApi } from '../../redux/actions/projectActions';\r\nimport { ArchivedProjectData } from '../../redux/selectors/projectSelectors';\r\nimport { useDispatch } from 'react-redux';\r\nimport { UpdateProjectArchivedApi } from '../../redux/actions/projectActions';\r\nimport MoreVertIcon from '@mui/icons-material/MoreVert';\r\nimport DeleteIcon from '@mui/icons-material/Delete';\r\nimport { SendSuccessNotification } from '../../components/Alert';\r\nimport ModalConfirmation from '../../components/dialog/DeleteProject';\r\nimport AlertDialog from '../../components/dialog/DeleteProject';\r\nimport DeleteProjectDialog from '../../components/dialog/DeleteProject';\r\nimport { GetCurrentUser, GetTokenUser } from '../../redux/selectors/userSelectors';\r\n\r\nexport const ArchivedProject = () => {\r\n  const tokenUser = GetTokenUser()  \r\n  const dispatch = useDispatch()\r\n  //const tokenUser = localStorage.getItem('access_token')\r\n  const [projects, setProjects] = useState([])\r\n  const archivedProjects = ArchivedProjectData()\r\n  console.log(archivedProjects)\r\n  const [anchorEl, setAnchorEl] = useState({});\r\n\r\n     \r\n  const handleClick = (event, projectId) => {\r\n    setAnchorEl(prevState => ({\r\n      ...prevState,\r\n      [projectId]: event.currentTarget,\r\n    }));\r\n  };\r\n  \r\n  const handleClose = (projectId) => {\r\n    setAnchorEl(prevState => ({\r\n      ...prevState,\r\n      [projectId]: null,\r\n    }));\r\n  };\r\n\r\n  const handleMenuItemClick = async(e, projectId) => {\r\n    console.log(projectId)\r\n    // Add your logic here based on the selected option\r\n\r\n\r\n    try{\r\n\r\n      await UpdateProjectArchivedApi(projectId,tokenUser,false )\r\n      SendSuccessNotification('Project unarchived with success')\r\n      dispatch(GetProjectArchivedApi(tokenUser))\r\n    }catch(error){\r\n      console.error(error)\r\n    }\r\n   \r\n    handleClose();\r\n  };\r\n\r\n  \r\n\r\n  useEffect(() => {\r\n    try {\r\n      dispatch(GetProjectArchivedApi(tokenUser))\r\n\r\n    }\r\n    catch(error){\r\n      console.error(error)\r\n    }\r\n  }, [tokenUser] )\r\n\r\n  useEffect(() => {\r\n    \r\n    setProjects(archivedProjects)\r\n    \r\n  }, [archivedProjects] )\r\n\r\n\r\n  return (\r\n\r\n   \r\n      <Container maxWidth=\"md\" sx={{ mt: 5 }}>\r\n      <Typography variant=\"h4\" sx={{ mb: 3 }}>\r\n        Archived project(s)\r\n      </Typography>\r\n\r\n      {projects?.map((project) => (\r\n        <Card style={{ height: '160px', width: '900px' }} key={project.id} sx={{ mb: 2 }}>\r\n          <CardContent>\r\n            <Grid marginLeft={'10px'} container justifyContent='space-between' alignItems=\"center\">\r\n              {/* Titre du projet, centré */}\r\n              <Typography marginLeft={'50px'} variant=\"h6\" component=\"div\" sx={{ mb: 1, textAlign: 'center', flex: 1 }}>\r\n                <strong>{project.name}</strong>\r\n              </Typography>\r\n\r\n              {/* Icônes à droite du titre */}\r\n              <Grid>\r\n                <IconButton onClick={(event) => handleClick(event, project.id)}>\r\n                  <MoreVertIcon />\r\n                </IconButton>\r\n                <Menu\r\n                  anchorEl={anchorEl[project.id]}\r\n                  open={Boolean(anchorEl[project.id])}\r\n                  onClose={() => handleClose(project.id)}\r\n                >\r\n                  <MenuItem\r\n                    value={project.id}\r\n                    onClick={(event) => handleMenuItemClick(event, project.id)}\r\n                  >\r\n                    unarchive\r\n                  </MenuItem>\r\n                </Menu>\r\n              </Grid>\r\n\r\n              <Grid>\r\n               <DeleteProjectDialog project={project.id} />\r\n               \r\n              </Grid>\r\n             \r\n            </Grid>\r\n\r\n            {/* Autres informations */}\r\n            <Typography variant=\"body2\" color=\"text.secondary\">\r\n            \r\n            </Typography>\r\n          </CardContent>\r\n        </Card>\r\n      ))}\r\n\r\n      {projects?.length === 0 && (\r\n        <Typography variant=\"body1\" sx={{ mt: 3 }}>\r\n          No archived projects at the moment.\r\n        </Typography>\r\n      )}\r\n    </Container>\r\n\r\n\r\n    \r\n   \r\n  );\r\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}